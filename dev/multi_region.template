heat_template_version: 2013-05-23

parameters:
  region_template:
    type: string
    description: region template
    default: |
      heat_template_version: 2013-05-23
      parameters:
        region:
          type: string
      resources:
        resource1:
          type: OS::Nova::Server
          properties:
            image: Ubuntu 14.04 LTS (Trusty Tahr) (PVHVM)
            flavor: 2 GB Performance
            name:
              str_replace:
                template: stack-server-region
                params:
                  stack: { get_param: "OS::stack_name" }
                  region: { get_param: region }

resources:
  DFW_stack:
    type: OS::Heat::Stack
    properties:
      context:
        region_name: DFW
      template: { get_param: region_template }
      timeout: 60
      parameters:
        region: DFW

  ORD_stack:
    type: OS::Heat::Stack
    properties:
      context:
        region_name: ORD
      template: { get_param: region_template }
      timeout: 60
      parameters:
        region: ORD

  IAD_stack:
    type: OS::Heat::Stack
    properties:
      context:
        region_name: IAD
      template: { get_param: region_template }
      timeout: 60
      parameters:
        region: IAD

  HKG_stack:
    type: OS::Heat::Stack
    properties:
      context:
        region_name: HKG
      template: { get_param: region_template }
      timeout: 60
      parameters:
        region: HKG

  SYD_stack:
    type: OS::Heat::Stack
    properties:
      context:
        region_name: SYD
      template: { get_param: region_template }
      timeout: 60
      parameters:
        region: SYD
